/*
 * jztoc UI Components
 *
 * Copyright 2010, Acatl Pacheco
 * Licensed under the MIT License.
 *
 */
 
 
 var FocusEvents={FOCUSIN:"focusin",FOCUSOUT:"focusout"},MouseEvents={CLICK:"click",DBCLICK:"dbclick",HOVER:"hover",MOUSEDOWN:"mousedown",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEOVER:"mouseover",MOUSEUP:"mouseup"};$.extend(MouseEvents,FocusEvents);var KeyboardEvents={KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup"};$.extend(KeyboardEvents,FocusEvents);
var FormEvents={BLUR:"blur",CHANGE:"change",FOCUS:"focus",SELECT:"select",SUBMIT:"submit"},StateEvents={EXITSTATE:"exitstate",ENTERSTATE:"enterstate",ENDSTATE:"endstate"},UIComponentEvents={STARTRENDERING:"startrendering",FINISHRENDERING:"finishrendering"};
$.ui.widget.subclass("ui.uicomponent",{options:{data:{},getChildren:true,renderHtmlTemplate:false,htmlTemplate:""},_helpers:[],elements:{},states:{_enterState:null,_exitState:null},_create:function(){this.element.addClass("ui-component");if(this._helpers!=null)for(var a in this._helpers)$.extend(this,this._helpers[a]);var b={};for(a in this._states)b[this._states[a]]=this._states[a];this._states=b;this.options.renderHtmlTemplate==true&&this._renderHtmlTemplate();this.options.getChildren==true&&this._getChildren()},
_getChildren:function(){var a=[];$("[id]",this.element).each(function(){$(this).attr("id")!=null&&a.push({id:$(this).attr("id"),instance:$(this)})});this.elements={};for(var b in a){var c=a[b];this.elements[c.id]=c.instance}},_renderHtmlTemplate:function(a){if(!(this.options.htmlTemplate==null||this.options.htmlTemplate=="")){$(b).trigger(UIComponentEvents.STARTRENDERING);var b=this.element;if(a!=null)b=typeof a!=="string"?a:$(a);b.html(this.options.htmlTemplate);$(b).trigger(UIComponentEvents.FINISHRENDERING)}},
getChild:function(a){return $(a,this.element)},addChild:function(a){a=$(a).appendTo(this.element);var b=a.attr("id");if(b!=null)this.elements.push[b]=a;return a},__currentState:null,currentState:function(a){if(arguments.length==0)return this.__currentState;for(var b=this.__currentState,c=a.split(" "),d=[],e=1;e<arguments.length;e++)d.push(arguments[e]);if(this.states!=null){this.__currentState=c[c.length-1];this.states._exitState!=null?this.states._exitState.apply(this,[a]):$(this.element).trigger(StateEvents.EXITSTATE);
this.states._enterState!=null?this.states._enterState.apply(this,[a]):$(this.element).trigger(StateEvents.ENTERSTATE);for(var f in c){if(b==null)b="";d.splice(0,0,b);this.states[c[f]].apply(this,d);b=c[f];d.splice(0,1)}this.states._endState!=null?this.states._endState.apply(this,[a]):$(this.element).trigger(StateEvents.ENDSTATE)}},_updateView:function(){},invalidateView:function(){this._updateView()},destroy:function(){$.Widget.prototype.destroy.apply(this,arguments)}});
$.ui.uicomponent.subclass("ui.document",{pageTitle:function(a){$("title").text(a)},destroy:function(){$.Widget.prototype.destroy.apply(this,arguments)}});
$.ui.uicomponent.subclass("ui.itemrenderer",{options:{listData:{owner:null,data:null,column:null,index:null,td:null,tr:null}},_create:function(){this.element.addClass("ui-itemrenderer")},_dispatchEvent:function(a,b){var c=jQuery.Event(a);b!=null&&$.extend(c,b);c.listData=this.options.listData;$(this.options.listData.owner.element).trigger(c)},destroy:function(){$.Widget.prototype.destroy.apply(this,arguments)}});
(function(a){a.fn.addEventListener=function(b,c,d,e){if(!(arguments.length<2)){var f=c;if(arguments.length>2)f=a.proxy(c,d);return this.each(function(){a(this).bind(b,e,f)})}}})(jQuery);(function(a){a.fn.getChild=function(b){if(jQuery.type(b)=="number")return a(this).children().eq(b);return a(b,this)}})(jQuery);
